# ğŸ“¦ Next.js é¡¹ç›®éƒ¨ç½²æ–‡ä»¶æ¸…å•

## âœ… ä¼˜åŒ–æˆåŠŸï¼

**æ„å»ºäº§ç‰©å¤§å°ï¼š**
```
æ€»è®¡ï¼š192.96 MB
â”œâ”€â”€ cache/         184.70 MB  âŒ ä¸éœ€è¦ä¸Šä¼ ï¼ˆæ„å»ºç¼“å­˜ï¼‰
â”œâ”€â”€ server/          4.04 MB  âœ… éœ€è¦
â”œâ”€â”€ static/          2.17 MB  âœ… éœ€è¦
â”œâ”€â”€ trace            1.41 MB  âœ… éœ€è¦
â”œâ”€â”€ types/          613.19 KB  âœ… éœ€è¦
â””â”€â”€ é…ç½®æ–‡ä»¶         < 100 KB  âœ… éœ€è¦

å®é™…ä¸Šä¼ ï¼š7.62 MBï¼ˆå‡å°‘äº† 98%ï¼ï¼‰
```

---

## ğŸ“‹ éƒ¨ç½²æ—¶éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶

### æ–¹æ³• 1ï¼šæ’é™¤ cache æ–‡ä»¶å¤¹ï¼ˆæ¨èï¼‰

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ .next/
â”‚   â”œâ”€â”€ server/          âœ… ä¸Šä¼ ï¼ˆ4 MBï¼‰
â”‚   â”œâ”€â”€ static/          âœ… ä¸Šä¼ ï¼ˆ2 MBï¼‰
â”‚   â”œâ”€â”€ trace            âœ… ä¸Šä¼ ï¼ˆ1 MBï¼‰
â”‚   â”œâ”€â”€ types/           âœ… ä¸Šä¼ ï¼ˆ600 KBï¼‰
â”‚   â”œâ”€â”€ cache/           âŒ ä¸ä¸Šä¼ ï¼ˆ185 MB ç¼“å­˜æ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ *.json          âœ… ä¸Šä¼ ï¼ˆé…ç½®æ–‡ä»¶ï¼‰
â”œâ”€â”€ public/              âœ… ä¸Šä¼ ï¼ˆçº¦ 1-2 MBï¼‰
â”œâ”€â”€ prisma/              âœ… ä¸Šä¼ ï¼ˆå‡ KBï¼‰
â”œâ”€â”€ package.json         âœ… ä¸Šä¼ 
â”œâ”€â”€ package-lock.json    âœ… ä¸Šä¼ 
â”œâ”€â”€ next.config.js       âœ… ä¸Šä¼ 
â”œâ”€â”€ tsconfig.json        âœ… ä¸Šä¼ 
â””â”€â”€ .env                 âœ… ä¸Šä¼ ï¼ˆç”Ÿäº§ç¯å¢ƒé…ç½®ï¼‰
```

### æ–¹æ³• 2ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ„å»ºï¼ˆæ›´ç®€å•ï¼‰

**åªä¸Šä¼ æºç ï¼ˆ2 MBï¼‰ï¼š**
```
âœ… src/
âœ… public/
âœ… prisma/
âœ… package.json
âœ… package-lock.json
âœ… next.config.js
âœ… tsconfig.json
âœ… .env

âŒ node_modules/
âŒ .next/
âŒ .git/
```

**æœåŠ¡å™¨ä¸Šæ“ä½œï¼š**
```bash
# 1. å®‰è£…ä¾èµ–
npm install --production

# 2. ç”Ÿæˆ Prisma
npx prisma generate

# 3. æ„å»ºï¼ˆè¿™é‡Œæ‰ç”Ÿæˆ .nextï¼‰
npm run build

# 4. å¯åŠ¨
npm start
```

---

## ğŸš€ Windows æ‰“åŒ…è„šæœ¬

åˆ›å»º `pack-for-deploy.bat`ï¼š

```batch
@echo off
echo æ­£åœ¨æ‰“åŒ…éƒ¨ç½²æ–‡ä»¶...

REM åˆ›å»ºä¸´æ—¶ç›®å½•
mkdir deploy-temp 2>nul

REM å¤åˆ¶ .nextï¼ˆæ’é™¤ cacheï¼‰
xcopy .next deploy-temp\.next\ /E /I /Y /EXCLUDE:exclude.txt

REM å¤åˆ¶å…¶ä»–æ–‡ä»¶
xcopy public deploy-temp\public\ /E /I /Y
xcopy prisma deploy-temp\prisma\ /E /I /Y
copy package.json deploy-temp\
copy package-lock.json deploy-temp\
copy next.config.js deploy-temp\
copy tsconfig.json deploy-temp\
copy .env deploy-temp\

REM å‹ç¼©
tar -czf deploy.tar.gz -C deploy-temp .

REM æ¸…ç†
rmdir /s /q deploy-temp

echo å®Œæˆï¼ä¸Šä¼  deploy.tar.gzï¼ˆçº¦ 10-20 MBï¼‰
pause
```

åˆ›å»º `exclude.txt`ï¼š
```
cache
```

---

## ğŸ“ å¤§å°å¯¹æ¯”

| æ–¹æ¡ˆ | ä¸Šä¼ å¤§å° | è¯´æ˜ |
|------|---------|------|
| å…¨éƒ¨ä¸Šä¼ ï¼ˆåŒ…å« cacheï¼‰ | 193 MB | âŒ å¤ªå¤§ |
| æ’é™¤ cache | 8 MB | âœ… æ¨è |
| åªä¸Šä¼ æºç  | 2 MB | âœ… æœ€å° |

---

## âœ… éªŒè¯æ¸…å•

ä¸Šä¼ å‰æ£€æŸ¥ï¼š

```bash
# Windows æŸ¥çœ‹ .next æ–‡ä»¶å¤¹å†…å®¹
dir .next /s

# ç¡®è®¤ cache æ–‡ä»¶å¤¹æ˜¯å¦è¢«æ’é™¤
# åº”è¯¥çœ‹åˆ° serverã€staticï¼Œä½†æ²¡æœ‰ cache
```

---

## ğŸ‰ ä¼˜åŒ–æˆæœ

| é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| .next æ€»å¤§å° | 387 MB | 193 MB | â¬‡ï¸ 50% |
| å®é™…ä¸Šä¼  | 387 MB | 8 MB | â¬‡ï¸ 98% |
| highlight.js | 20 MB | 2 MB | â¬‡ï¸ 90% |
| Source Maps | åŒ…å« | ç§»é™¤ | â¬‡ï¸ 50% |

**ä» 387 MB å‡å°‘åˆ° 8 MBï¼å‡å°‘äº† 98%ï¼** ğŸ‰

